# Scripts

At present, the game is extremely barebones. The player clicks to leave the orbit of a _Celestial Body_ and reattaches to the next orbit it enters. There are no win or loss conditions, or scoring mechanisms, however the distance travelled by the _Comet_ is measured.

## CometBehaviour.cs

This script governs the behaviour of the 'comet' which the player controls. It listens for player input, and accepts a single click/tap to disconnect from the current orbit. Two other inputs are also accepted for debug purpose, one of which returns the comet to the starting location and one of which switches the orbit between clockwise and anticlockwise.

Although Unity has it's own physics system which can be used to detect collisions, I opted to use my own mathematical calculations to check when a comet enters an orbit, as it was a rather simple task and kept the detections lightweight (and it's always fun writing your own logic).

The script also makes use of the singleton pattern. In the `Awake()` function, which is called when a script is loaded, it assigns a reference to this script to a static field `instance`, allowing it to be accessed from any other script. The code also checks that if another script of the same type tries to load, it is destroyed, to ensure uniqueness.

## CelestialBody.cs

This script is used to define the objects which the comet shall orbit. The script contains variables that define both the way it acts and the way it looks (some of these variables, such as `explosionRadius`, have not yet had their corresponding logic implemented).

The variables which define the way an object acts give variety to the gameplay. For example, the `orbitRadius` can be changed to give different radii in which the player orbits, and if this value is 0 it represents an object that cannot be orbited. Regardless of this value, if an object has a `destructionFactor` greater than 0 then it will eventually be destroyed, meaning it can no longer be orbited and will eject the player if currently being orbited. If an object also has an `explosionRadius` greater than 0, then it will cause an explosion destroying everything in this radius on destruction, prompting the player to hightail it outta there. Finally, the `gravityFactor` being greater than 0 will cause the comet to be drawn towards the object, and less than 0 will slowly move it away.

By customising the `coreObject` variable, the core of the object can be made to look like different Celestial Bodies. For example, a planet-looking object would lend itself to having a stable orbit, whereas a sun-like object may lend itself to being destroyed and exploding Ã  la a supernova, and a black hole might draw the comet in. As well as this, a set of `planetRings` can be defined, giving more variety to the Celestial Bodies.

## MyGrid.cs

This script defines discrete grids which essentially act as containers for _CelestialBodies_ and some uninteractable background effects, such as stars and nebulae. It is named _MyGrid_ rather than just _Grid_ to differentiate it from a script built in to Unity named _Grid_. Each Grid is only active and rendered in the scene if the Comet is in an adjacent Grid or the Grid itself. This allows both a cluster of _CelestialBodies_ to be generated at once, and only a maximum of 9 Grids to be active at once (1 Grid the Comet is in, 8 adjacent, including diagonals), reducing the usage of resources, especially whence the Comet has travelled far from its original position. Whenever the player enters a new Grid, a check is performed to see if all the surrounding Grids exist, and if any do not, they are generated then.

The Grid generation method is driven by a single random seed, which is itself generated by using Signed Cantor Pairing on the Grid's integer coordinates which uniquely identify it. This means that, although the generation of a Grid is random, it is repeatable, thus the gameplay can have both a wide variety, but allow players to revisit locations they have already been to, or trace back old journeys. It should be noted, however, that the Grids may vary slightly depending in which Grid is generated first in the game, as the generation of Celestial Bodies checks adjacent Grids for any bodies it may overlap with and cancels the generation if an overlap exists. This is an ongoing issue and solutions are being considered to make the Grid generation entirely deterministic.
